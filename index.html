<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Autospot DZ</title>

<style>
body {
  margin: 0;
  background: #fff;
  font-family: Arial, sans-serif;
  text-align: center;
}

.container {
  max-width: 1200px;
  margin: auto;
}

img {
  max-width: 90%;
}

.btn {
  padding: 12px 28px;
  background: black;
  color: white;
  border-radius: 6px;
  text-decoration: none;
}

.filters button {
  margin: 10px;
  padding: 8px 18px;
  cursor: pointer;
}

.car-card {
  width: 260px;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 15px;
}
</style>
</head>

<body>

<div class="container">
  <img src="logo.png">

  <br><br>
  <a href="https://docs.google.com/forms/..." class="btn car-sound" target="_blank">
    Register your car
  </a>
</div>

<!-- FILTER BUTTONS -->
<div class="filters" id="filter-buttons"></div>

<!-- CARS -->
<div id="cars" style="display:flex;flex-wrap:wrap;justify-content:center;gap:30px;margin-top:40px;"></div>

<!-- Sounds -->
<audio id="clickSound"><source src="click.mp3"></audio>
<audio id="carSound"><source src="car.mp3"></audio>

<script>
const clickSound = document.getElementById("clickSound");
const carSound = document.getElementById("carSound");

document.addEventListener("click", e => {
  if (e.target.classList.contains("click-sound")) clickSound.play();
  if (e.target.classList.contains("car-sound")) carSound.play();
});

let allCars = [];

fetch('cars.json')
  .then(r => r.json())
  .then(data => {
    allCars = data.filter(car => car.sold === false);
    createFilters(allCars);
    renderCars(allCars);
  });

function createFilters(cars) {
  const brands = ["All", ...new Set(cars.map(c => c.brand))];
  const container = document.getElementById("filter-buttons");

  brands.forEach(brand => {
    const btn = document.createElement("button");
    btn.textContent = brand;
    btn.onclick = () => {
      if (brand === "All") renderCars(allCars);
      else renderCars(allCars.filter(c => c.brand === brand));
    };
    container.appendChild(btn);
  });
}

function renderCars(cars) {
  const container = document.getElementById("cars");
  container.innerHTML = "";

  cars.forEach(car => {
    const div = document.createElement("div");
    div.className = "car-card";

    div.innerHTML = `
      <img src="${car.image}">
      <h3>${car.brand} ${car.model} ${car.year}</h3>
      <a href="${car.instagram}" target="_blank" class="click-sound">Instagram</a><br><br>
      <a href="${car.tiktok}" target="_blank" class="click-sound">TikTok</a>
    `;

    container.appendChild(div);
  });
}
</script>

</body>
</html>
